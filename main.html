<!DOCTYPE html>
<html>
<head>
<meta charset='utf-8' />
<title>地理院地図VectorのベクトルタイルをMaplibre JSで表示するサンプル</title>
<meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
<script src="https://unpkg.com/maplibre-gl@2.1.9/dist/maplibre-gl.js"></script>
<link href="https://unpkg.com/maplibre-gl@2.1.9/dist/maplibre-gl.css" rel="stylesheet" />
<style>
body { margin:0; padding:0; }
#map {
  position: absolute;
  top: 0;
  bottom: 0;
  width: 100%;
}


#basemaps-selecter {
        position: absolute;
        top: 20px;
        left: 20px;
        background: rgba(255, 255, 255, 0);
      }
      #basemaps {
        font-size: 16px;
        padding: 4px 8px;
      }



    
#menu {
background: #fff;
position: absolute;
z-index: 1;
top: 10px;
right: 10px;
border-radius: 3px;
width: 120px;
border: 1px solid rgba(0, 0, 0, 0.4);
font-family: 'Open Sans', sans-serif;
}
 
#menu a {
font-size: 13px;
color: #404040;
display: block;
margin: 0;
padding: 0;
padding: 10px;
text-decoration: none;
border-bottom: 1px solid rgba(0, 0, 0, 0.25);
text-align: center;
}
 
#menu a:last-child {
border: none;
}
 
#menu a:hover {
background-color: #f8f8f8;
color: #404040;
}
 
#menu a.active {
background-color: #3887be;
color: #ffffff;
}
 
#menu a.active:hover {
background: #3074a4;
}

</style>
</head>
<body>
 
<nav id="menu"></nav>
<div id='map'></div>
<div id="basemaps-selecter">

  <select id="basemaps">
    <option value="pale">地理院タイル淡色</option>
    <option value="std">地理院タイル標準</option>
    <option value="gsi_3d">地理院タイル3D風</option>
    <option value="std_vertical">地理院タイル標準縦書きあり</option>
    <option value="gsi_photo">地理院タイル写真</option>

</div>

<script>



const base_maps = {
  "pale": './pale.json',
  "std":'./std.json',
  "gsi_3d":'./building3d.json',
  "std_vertical":'./std_vertical.json',
   "gsi_photo": {
        version: 8,
        sources: {
            gsi_photo: {
                type: 'raster',
                tiles: [
                    'https://cyberjapandata.gsi.go.jp/xyz/seamlessphoto/{z}/{x}/{y}.jpg',
                ],
                tileSize: 256,
                attribution:
                    '国土地理院',
            },
        },
        layers: [
            {
                id: 'gsi_photo',
                type: 'raster',
                source: 'gsi_photo',
                minzoom: 5,
                maxzoom: 18,
            },
        ],
    }
};

var map = new maplibregl.Map({
  container: 'map',
  hash: true,
  style: './pale.json', //style.jsonへのパス
  center: [134.0188, 34.755387],  
  zoom: 15,
  maxZoom: 17.99,
  minZoom: 4,
  localIdeographFontFamily: false
//  localIdeographFontFamily: ['MS Gothic', 'Hiragino Kaku Gothic Pro', 'sans-serif']
});



const setBasemap = (name) => {
            // Instantiate the given basemap layer.
            map.setStyle(base_maps[name]);

  
        };

setBasemap('pale');
 
 
const basemapsSelectElement = document.querySelector("#basemaps");

        basemapsSelectElement.addEventListener("change", (e) => {
            setBasemap(e.target.value);

        });



map.addControl(new maplibregl.NavigationControl(), 'bottom-right');
map.addControl(new maplibregl.ScaleControl() );


map.on('load', function () {
map.addSource('okayama-raster-tiles', {
  
'type': 'raster',
'tiles': [
'https://disaportaldata.gsi.go.jp/raster/01_flood_l2_shinsuishin_pref_data/33/{z}/{x}/{y}.png'
],
'tileSize': 256,
'attribution':
'岡山県'

});

map.addLayer({
 'id':'okayama-sinsui',
 'type':'raster',
 'source':'okayama-raster-tiles',
 'minzoom':2,
 'maxzoom':17,
 paint:{}

}
);

map.setPaintProperty(
'okayama-sinsui',
'raster-opacity',
0.5
);
 

});



</script>
 
</body>
</html>