<!DOCTYPE html>
<html lang="en">
<head>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <link href="https://unpkg.com/maplibre-gl@2.1.9/dist/maplibre-gl.css" rel="stylesheet" />
    <script src="https://unpkg.com/maplibre-gl@2.1.9/dist/maplibre-gl.js"></script>
    <script src="https://unpkg.com/flatgeobuf@3.22.0/dist/flatgeobuf-geojson.min.js"></script>
    <style>
        body { margin:0; padding:0; }
#map {
  position: absolute;
  top: 0;
  bottom: 0;
  width: 100%;
}
    </style>
</head>
<body>
    <div id="map"></div>
    <script type="module">
        const map = new maplibregl.Map({
            container: "map",
            style: './skeleton.json',
            center: [140.311958, 38.254897],
            zoom: 15,
            maxZoom: 18,
        });

        const response = await fetch("https://stragetest.s3.ap-northeast-1.amazonaws.com/nouchi/yamagata/fgb/062014yamagata.fgb")
        map.on("load", async () => {
            const fc = {type: "FeatureCollection", features: []};
            for await (const f of flatgeobuf.deserialize(response.body))
                fc.features.push(f);

            map.addSource("fude_yamagata", {
               type: "geojson",
               data: fc,
            });
            map.addLayer({
                id: "fude-fill",
                type: "fill",
                source: "fude_yamagata",
                paint: {

                  "fill-color": {
                    property: 'land_type',
                    type: 'categorical',
                    stops: [
                               [200, '#d2b00f'],
                               [100, '#60932a'],
                           ]
                  },
                  
                  
                 
                  "fill-opacity": 0.5,
                },
            });
            map.addLayer({
                id: "fude-line",
                type: "line",
                source: "fude_yamagata",
                paint: {
                  "line-color": "#888888",
                  "line-opacity": 0.9,
                  "line-width": 1,
                },
            });
        
        });
    </script>
</body>
</html>
